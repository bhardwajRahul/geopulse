# GeoPulse Configuration
# Copy this file to .env
# For production deployment, update the URLs and enable secure cookies below

# The version of the app, frontend and backend should use the same version
GEOPULSE_VERSION=1.1.2

# Frontend (UI) URLs - used in CORS policies (comma-separated for multiple access methods)
# Local development: http://localhost:5555
# Homelab example: http://localhost:5555,http://192.168.1.100:5555,http://your-tailscale-ip:5555
# Production example: https://geopulse.yourdomain.com
GEOPULSE_UI_URL=http://localhost:5555

# Cookie domain for authentication cookies
#
# IMPORTANT: GeoPulse uses nginx to proxy all requests (frontend + backend), so the browser
# sees everything as same-origin (e.g., all requests to geopulse.mydomain.com).
#
# For standard deployments (with nginx proxy):
#   - Local/Homelab/Production: LEAVE EMPTY (recommended for 99% of deployments)
#   - Example domains that should use empty value:
#     * http://localhost:5555
#     * http://192.168.1.100:5555
#     * https://geopulse.mydomain.com
#
# Only set this if deploying WITHOUT nginx proxy AND using separate subdomains:
#   - Frontend: app.mydomain.com
#   - Backend: api.mydomain.com
#   - In this case, set: GEOPULSE_COOKIE_DOMAIN=.mydomain.com
#   - This is NOT a standard GeoPulse deployment scenario
#
# Security Note: Setting a domain like ".mydomain.com" shares cookies with ALL subdomains,
# which can be a security risk. Only use when absolutely necessary.
GEOPULSE_COOKIE_DOMAIN=""

# Set to true in production to ensure auth cookies are only sent over HTTPS.
# Requires a reverse proxy with TLS/SSL termination.
# If you deploy to local machine and use HTTP protocol, keep it as false
GEOPULSE_AUTH_SECURE_COOKIES=false

# Backend URL used by nginx proxy in Docker containers
# For Docker: http://geopulse-backend:8080 (internal container communication)
# For development with separate backend: http://localhost:8080
# If you plan to deploy this app via docker-compose (prefferable way) do not change this value.
GEOPULSE_BACKEND_URL=http://geopulse-backend:8080

# Postgres Database
GEOPULSE_POSTGRES_HOST=geopulse-postgres
GEOPULSE_POSTGRES_PORT=5432
GEOPULSE_POSTGRES_DB=geopulse
GEOPULSE_POSTGRES_USERNAME=geopulse-user
GEOPULSE_POSTGRES_PASSWORD=change-this-secure-password

# MQTT (optional)
# Change GEOPULSE_MQTT_ENABLED to true if you plan to deploy MQTT broker
GEOPULSE_MQTT_ENABLED=false
GEOPULSE_MQTT_BROKER_HOST=geopulse-mosquitto
GEOPULSE_MQTT_BROKER_PORT=1883
GEOPULSE_MQTT_USERNAME=geopulse_mqtt_admin
# Mosquitto admin password, change it for more secure value
GEOPULSE_MQTT_PASSWORD=change-this-mqtt-admin-password

# ============================================
# OIDC Configuration (Optional)
# ============================================
# Enable/disable OIDC authentication support
GEOPULSE_OIDC_ENABLED=false

# ============================================
# Google OIDC Configuration
# ============================================
# To enable Google OIDC:
# 1. Go to https://console.cloud.google.com/apis/credentials
# 2. Create OAuth 2.0 Client ID
# 3. Add your callback URL to authorized redirect URIs: http://your-domain:port/oidc/callback
# 4. Copy Client ID and Client Secret below
GEOPULSE_OIDC_PROVIDER_GOOGLE_ENABLED=false
GEOPULSE_OIDC_PROVIDER_GOOGLE_CLIENT_ID=
GEOPULSE_OIDC_PROVIDER_GOOGLE_CLIENT_SECRET=
GEOPULSE_OIDC_PROVIDER_GOOGLE_DISCOVERY_URL=https://accounts.google.com/.well-known/openid-configuration

# ============================================
# Generic OIDC Provider Configuration
# ============================================
# Use this for Okta, Authentik, PocketId, Keycloak, or any custom OIDC provider
# You can configure one generic provider at a time
GEOPULSE_OIDC_PROVIDER_GENERIC_ENABLED=false

# Display name for the provider (appears on login buttons)
GEOPULSE_OIDC_PROVIDER_GENERIC_NAME=Custom OIDC

# OIDC client credentials
GEOPULSE_OIDC_PROVIDER_GENERIC_CLIENT_ID=
GEOPULSE_OIDC_PROVIDER_GENERIC_CLIENT_SECRET=

# OIDC discovery URL (usually ends with /.well-known/openid-configuration)
# Examples:
# - Keycloak: https://your-keycloak-server/realms/your-realm/.well-known/openid-configuration
# - Authentik: https://your-authentik-server/application/o/your-app/.well-known/openid-configuration
# - Okta: https://your-org.okta.com/.well-known/openid-configuration
# - PocketId: https://your-pocketid-server/.well-known/openid-configuration
GEOPULSE_OIDC_PROVIDER_GENERIC_DISCOVERY_URL=

# Frontend max upload file size
CLIENT_MAX_BODY_SIZE=1000M

# DNS servers (127.0.0.11 is default Docker DNS server) that are used to resolve OpenStreetMaps hosts.
# Change it only if default DNS don't work for your setup. For 99% users default value works just fine.
OSM_RESOLVER=127.0.0.11 8.8.8.8

# Geocoding delay between requests in milliseconds. Default value is 1000ms (1 second).
# For selfhosted solutions you can decrease it to lower values, including 0
GEOPULSE_GEOCODING_DELAY_MS=1000